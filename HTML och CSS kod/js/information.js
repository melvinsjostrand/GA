// let Json =
//     {
//         "date": "230324",
//         "day": "fredag",
//         "activities": 
//         [
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//             {
//                 "actId": "int",
//                 "orgId": "int",
//                 "org": "Fritid",
//                 "act": "bowlings",
//                 "info": "informationadasdgeargartadfgawerfasdfag",
//                 "place": "location",
//                 "start": 
//                 {
//                     "date": "2303245",
//                     "time": "13.00"
//                 },
//                 "end": 
//                 {
//                     "date": "string",
//                     "time": "string"
//                 }
//             },
//         ]
        
//     }



// Json={            
//     "place":location,
//     "act":act,
//     "info":upload_information,
//     "start":{
//         "date":st[0],
//         "time":st[1]
//     },
//let Jsonactivity = json;
let orgId;
let jsonAct = [];

function init(){
    getActivities();

}
window.onload = init;

async function getActivities(){

    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);
    orgId = Number(urlParams.get("Id"));

    let path = "https://omsorgapi.azurewebsites.net/Activity/org/" + orgId;

    jsonAct = await getactFetch(path);
    jsonAct.activities.forEach(element =>{
        daycalendar(element);
        createSection(element);
    })
}



// function day(element){

// }

function daycalendar(element)  {
    console.log(element);
    let calendar = document.getElementsByClassName("Dag-Infokalender");
    let paragraph = document.createElement("p");
    let orgplustime = element.start.time + " " + element.org;
    let tN = document.createTextNode(orgplustime);
    paragraph.appendChild(tN);
    calendar[0].appendChild(paragraph);
}

function createSection(element){
    let position = document.getElementsByClassName("gridsection2");
    let section = document.createElement("section");
    let main = document.getElementById("main");
    

    let title = document.createElement("h3");
    let TN = document.createTextNode(element.org);
    title.appendChild(TN);


    let paragraph = document.createElement("p");
    let t = element.start.time + " " + element.info;
    let infoN = document.createTextNode(t);
    paragraph.appendChild(infoN);

    main.appendChild(position[0]);
    position[0].appendChild(section);
    section.appendChild(title);
    section.appendChild(paragraph);
}

async function getactFetch(path){
    console.log(localStorage.getItem("GUID"));
    let response = await fetch(path, {
        headers:{
            "Authorization": localStorage.getItem("GUID")
        }
    });
    let json = await response.json();
    return json;
}
